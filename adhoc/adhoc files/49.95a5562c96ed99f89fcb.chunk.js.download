(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[49],{"96qd":function(e,t,n){"use strict";n.d(t,"a",(function(){return NotificationsList}));var a=n("udU5"),i=n("630U"),o=n("7xvl"),c=n("q1tI"),r=n.n(c),s=n("z9go"),l=n("g3jP"),u=n.n(l);const d={"location/DASHBOARD":"dashboard_v2","location/CATALOG":"catalog","location/COURSE":"course_landing_page","location/PATH":"path_landing_page","location/COURSE_CONTENT_ITEM":"le_course_content_item","location/PATH_CONTENT_ITEM":"le_path_content_item"},byDate=(e,t)=>new Date(t.time).getTime()-new Date(e.time).getTime();class NotificationsList extends c.Component{constructor(...e){super(...e),this.trackNotificationClick=e=>{const t=this.props.locationType;Object(s.b)("notification","clicked",{target:"notification_bell_cta",page_name:t&&d[t]||null,event_id:e.id,context:e.campaign}),Object(s.c)({target:"notification_bell_cta",page_name:t&&d[t],event_id:e.id,context:e.campaign})},this.componentWillUnmount=()=>{this.props.notificationsMarkedRead(this.props.notifications.map((({id:e})=>e)))},this.getImageType=({img:e,campaign_name:t})=>{if("achievement"===t)return{icon:"trophy",url:void 0};if("streaks"===t)return{icon:void 0,url:u.a};const n=null==e?void 0:e.type,a=null==e?void 0:e.slug;return{icon:"icon"===n?a:void 0,url:"url"===n?a:void 0}}}render(){const e=this.props.notifications.sort(byDate).map((e=>{const t=this.getImageType(e),n=t.icon,a=t.url;return{date:Object(o.a)(new Date(e.time)),id:e.id,iconSettings:{color:i.g["blue-900"]},iconSlug:n,imageUrl:a,link:e.href,text:e.description,unread:1===e.status,campaign:e.campaign_name}}));return r.a.createElement(a.a,{className:this.props.className,notifications:e,onNotificationClick:this.trackNotificationClick})}}},"P9M/":function(e,t,n){"use strict";n.d(t,"a",(function(){return MeDropdown}));var a=n("ODXe"),i=n("/VKx"),o=n("7Wyp"),c=n("G9Ht"),r=n.n(c),s=n("q1tI"),l=n.n(s),u=n("/MKj"),d=n("yy36"),m=n("MAbI"),f="toggle__3szlvGns4ctzptRSxBW7sy",_="menu__1AfYFtFYdqxwHtktzinK",p="menuItem__28u20ypRAyAvlHBP5pXU5s",b="separatorBottom__stMBw7lQlcd5SFdGddDbg",g="separatorTop__2VEbmByYvOdmtayFGvjpae",O="topDropdown__1GixDLKn_VzbgBE21Ko03H";const ClickTarget=({profileImage:e,onClick:t,targetRef:n})=>l.a.createElement("div",{ref:n},l.a.createElement("button",{"aria-label":"my account dropdown toggle",className:f,id:"dropdown-toggle",onClick:t,type:"button"},l.a.createElement(m.a,{small:!0,imageUrl:e})));var E=n("npf3"),h=n("TSYQ"),j=n.n(h),v=n("b0K7"),N=n("RsCp");const MenuItems=({showNavItems:e,isMobile:t,showProAds:n,isAdmin:a,isCustomerService:i,isPro:o,isAccountManager:c})=>{const getSeparator=e=>"help-link"===e?b:"sign-out-link"===e?g:null,r=(()=>{const r={href:v.Jb,children:"Upgrade to Pro",visible:t||e};return[n&&r,...Object(N.e)({isAdmin:a,isCustomerService:i,isPro:o,isAccountManager:c})].filter((e=>!!e))})();return l.a.createElement("div",null,r.filter((e=>e.visible)).map((e=>{const t=e.icon;return l.a.createElement("a",{onClick:e.onClick,href:e.href,target:"help-link"===e.id?"_blank":"_self","data-testid":e.id,key:"link-to-".concat(e.id),className:j()(p,"no-underline",e.id&&[getSeparator(e.id)])},t&&l.a.createElement(t,{size:24,"aria-hidden":!0}),e.children,e.badge?l.a.createElement(E.a,null,e.badge):null)})))},MeDropdown=({showNavItems:e=!1,onClick:t})=>{const n=Object(u.useSelector)(d.i).profileImage,c=Object(u.useSelector)(d.u),m=Object(u.useSelector)(d.x),f=Object(u.useSelector)(d.D),p=Object(u.useSelector)(d.t),b=Object(s.useRef)(null),g=Object(s.useState)(!1),E=Object(a.a)(g,2),h=E[0],j=E[1],v=Object(u.useSelector)(d.J),N=Object(u.useSelector)(d.A);return l.a.createElement(l.a.Fragment,null,l.a.createElement(ClickTarget,{profileImage:n,targetRef:b,onClick:()=>{j(!h),!h&&(null==t||t())}}),l.a.createElement(o.a,{className:O,align:"right",verticalOffset:1,outline:!0,isOpen:h,onRequestClose:()=>{j(!1)},targetRef:b},l.a.createElement(i.a,{column:!0,className:_},l.a.createElement("nav",null,l.a.createElement(MenuItems,{isAccountManager:p,isAdmin:c,isCustomerService:m,isMobile:r.a.any,isPro:f&&!N,showNavItems:e,showProAds:v})))))}},QJz3:function(e,t,n){"use strict";n.d(t,"b",(function(){return useNotificationArea})),n.d(t,"c",(function(){return useNotificationInteractions})),n.d(t,"a",(function(){return useNotifications}));var a=n("q1tI"),i=n("/MKj"),o=n("G4qV"),c=n("GsXu"),r=n("tQXl");function useNotificationArea(e){const t=e.id,n=Object(a.useMemo)((()=>Object(r.a)(t)),[t]),c=Object(r.b)(n),s=Object(o.b)({notifications:n,unreadCount:c});return Object(i.useSelector)(s)}function useNotificationInteractions(){const e=Object(i.useDispatch)();return Object(a.useMemo)((()=>({notificationsMarkedRead:t=>e(Object(c.d)(t))})),[e])}function useNotifications(e){!function useNotificationSubscribe(e){const t=Object(i.useDispatch)();return Object(a.useEffect)((()=>(t(Object(c.c)(e)),()=>{t(Object(c.b)(e.id))})),[t,e])}(e);return{data:useNotificationArea(e),actions:useNotificationInteractions()}}},g3jP:function(e,t,n){e.exports=n.p+"2e7770af3a38c3442e7802f2f6a91a6f.svg"},gnd6:function(e,t,n){"use strict";n.d(t,"a",(function(){return NotificationsDropdown}));var a=n("ODXe"),i=n("/VKx"),o=n("7Wyp"),c=n("q1tI"),r=n.n(c),s=n("tFdb"),l=n("96qd"),u=n("Xxlx"),d=n("QJz3"),m=n("ixXQ"),f="dropdown__1F_fcRWv-pe25RtHTZdeFh",_="notifications__dQ5YhPElQyuN4YvV60puJ",p="menuBell__3g4iBnjXjfVM0Q6IKDdIdT",b="topDropdown__1HUStgseh56noHmJ3KzVoN";const NotificationsDropdown=e=>{const t=Object(d.a)(m.a.HEADER_AREA),n=t.data,g=t.actions,O=n.notifications,E=n.unreadCount,h=g.notificationsMarkedRead,j=e.locationType,v=Object(c.useRef)(null),N=Object(c.useState)(!1),A=Object(a.a)(N,2),k=A[0],C=A[1],R=r.a.createElement("div",{ref:v},r.a.createElement(i.a,{center:!0,className:p},r.a.createElement(u.a,{data:{context:"global_nav",target:"notification_bell"},disableTracking:!!k,"aria-label":"notifications","data-testid":"notification_bell"},r.a.createElement(s.a,{theme:e.theme,key:"notification-bell",unreadCount:E,onClick:()=>{C(!k)}}))));return r.a.createElement(r.a.Fragment,null,R,r.a.createElement(o.a,{className:b,align:"right",verticalOffset:1,outline:!0,isOpen:k,onRequestClose:()=>{C(!1)},targetRef:v},r.a.createElement(i.a,{column:!0,className:f},r.a.createElement(l.a,{className:_,notifications:O,notificationsMarkedRead:h,locationType:j}))))}},ixXQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a={HEADER_AREA:{id:"bell",types:[],showRead:!0,limit:5},TOAST_AREA:{id:"toast",types:["achievement","target_not_met","target_met","target_exceeded","streak_extended","streak_started"],showRead:!1,limit:5}}},tFdb:function(e,t,n){"use strict";n.d(t,"a",(function(){return NotificationBell}));var a=n("ODXe"),i=n("FZcb"),o=n("Apmp"),c=n("TSYQ"),r=n.n(c),s=n("q1tI"),l=n.n(s),u={bell:"bell__AzBwO6vfXd1vBBNs_toEi",light:"light__2QkOxErjEG_gJjXx-P0vkr",unreadWrapper:"unreadWrapper__vRj5dfRgbpv3O9pAY9p9w",unread:"unread__CEzUq-gsL9aPdjh-k_4RR",ring:"ring__C8pkxyECPU6OcGZUFeBT4"};const NotificationBell=({as:e="button",className:t,theme:n="dark",unreadCount:c,onClick:d})=>{const m=Object(s.useState)(),f=Object(a.a)(m,2),_=f[0],p=f[1],b=Object(s.useState)(0),g=Object(a.a)(b,2),O=g[0],E=g[1];Object(s.useEffect)((()=>{p(window.document.querySelector('link[rel="shortcut icon"]'))}),[]),Object(s.useEffect)((()=>{_&&(_.href="/favicon".concat(c?"-unread":"",".ico"))}),[c,_]);const onMouseOut=()=>{E(O+1)};Object(s.useEffect)((()=>{const e=setTimeout((()=>{O>0&&E(O-1)}),2e3);return()=>clearTimeout(e)}),[O]);const h=r()(t,u.bell,u["".concat(n)],{[u.ring]:O>10});return l.a.createElement(i.a,{as:e,className:h,flat:!0,onBlur:onMouseOut,onMouseOut:onMouseOut,onClick:d,theme:"brand-dark-blue",type:"button","aria-label":"Toggle Notification Menu"},l.a.createElement(o.a,{size:20}),0!==c&&l.a.createElement("div",{id:"notification-count",className:u.unreadWrapper},l.a.createElement("p",{className:u.unread},c>99?99:c)))}}}]);
//# sourceMappingURL=49.95a5562c96ed99f89fcb.chunk.js.map